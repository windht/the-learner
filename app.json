{
    "data": {
        "templates": [],
        "states": [
            {
                "name": "course",
                "url": "/course?hash&index",
                "template": "<div class=\"md-vultr\" layout=\"row\" style=\"height:100vh\">\n    <div layout=\"column\" style=\"height:100%\" class=\"course-bar\">\n        <div class=\"course-part\" ng-repeat=\"part in vm.course.parts\" ng-class=\"{'opened':vm.openTab==$index}\">\n            \n            <md-button ng-click=\"vm.openTab=$index\" layout=\"row\" layout-align=\"center center\">\n                <span>{{part.name}}</span>\n                <span flex></span>\n                <md-icon ng-if=\"vm.openTab!=$index\">keyboard_arrow_down</md-icon>\n                <md-icon ng-if=\"vm.openTab==$index\">keyboard_arrow_up</md-icon>\n                </md-button>\n            \n                <div class=\"course-lesson\" ng-repeat=\"lesson in part.lessons\">\n                    <md-button ng-class=\"{'selected':vm.currentLessonId==$parent.$index+'.'+$index}\" ng-click=\"vm.selectCourse($parent.$index,$index)\">{{$parent.$parent.$index+1}}.{{$index+1}}.{{lesson.name}}</md-button>\n                </div>\n                \n                \n        </div>\n        \n        \n        <span flex></span>\n        <div style=\"padding:30px;color:white\" layout=\"row\" layout-align=\"center center\">\n            {{vm.course.name}}\n        </div>\n        \n    </div>\n    <div class=\"md-padding lesson-container\" flex>\n        <div ng-repeat=\"section in vm.lesson.sections\">\n            \n            <div style=\"margin:20px 0\" ng-if=\"section.type=='video'\">\n                <video ng-if=\"section.video_type=='url'\" width=\"100%\" vjs controls ng-src=\"{{section.video_url}}\"></video>\n                \n                <iframe ng-if=\"section.video_type=='youtube'\" style=\"display:block;width:700px;margin:0 auto;height:400px\" ng-src=\"{{vm.$sce.trustAsResourceUrl(section.video_url)}}\"></iframe>\n            </div>\n            \n            <div ng-if=\"section.type=='text'\" ng-bind-html=\"vm.getHtml(section.content)\">\n                \n            </div>\n        </div>\n        \n    </div>\n</div>",
                "alias": "Course",
                "controller": "function($stateParams,$http,$sce,$window,$timeout){\n    var vm = this;\n    var base = $stateParams.base;\n    \n    vm.openTab = 0;\n    vm.$sce = $sce;\n    \n    vm.selectCourse = selectCourse;\n    vm.getHtml = getHtml;\n    \n    init();\n    \n    function init(){\n        \n        if ($stateParams.hash) {\n            ipfs.cat(\"/ipfs/\"+$stateParams.hash, function (err, file) {\n                if (err) {\n                    throw err\n                }\n            //   console.log(file.toString('utf8'))\n                vm.course = JSON.parse((file.toString('utf8')))\n                vm.currentLessonId = window.localStorage['currentLessonId'];\n                vm.openTab = window.localStorage['currentTab'];\n                vm.currentLessonIndex = window.localStorage['currentLessonIndex'];\n                vm.lesson = vm.course.parts[vm.openTab].lessons[vm.currentLessonIndex];\n                \n                $timeout(function(){})\n            })\n        }\n        else if ($stateParams.index){\n            vm.course = $window.courses[$stateParams.index];\n            vm.currentLessonId = window.localStorage['currentLessonId'];\n            vm.openTab = window.localStorage['currentTab'];\n            vm.currentLessonIndex = window.localStorage['currentLessonIndex'];\n            vm.lesson = vm.course.parts[vm.openTab].lessons[vm.currentLessonIndex];\n                \n            $timeout(function(){})\n        }\n        else if (!$window.courses || !$window.courses[0]){\n            $state.go(\"app.entrance\")\n        }\n        else {\n            vm.course = $window.courses[0];\n            vm.currentLessonId = window.localStorage['currentLessonId'];\n            vm.openTab = window.localStorage['currentTab'];\n            vm.currentLessonIndex = window.localStorage['currentLessonIndex'];\n            vm.lesson = vm.course.parts[vm.openTab].lessons[vm.currentLessonIndex];\n        }\n        \n        \n    }\n    \n    function selectCourse(partIndex,lessonIndex){\n        \n        vm.currentLessonId = partIndex + '.' + lessonIndex;\n        \n        window.localStorage['currentLessonId'] = partIndex + '.' + lessonIndex;\n        window.localStorage['currentLessonIndex'] = lessonIndex;\n        window.localStorage['currentTab'] = partIndex;\n        \n\n        vm.lesson = vm.course.parts[partIndex].lessons[lessonIndex];\n        \n        console.log(vm.lesson)\n        \n        \n        \n        \n    }\n    \n    function getHtml(text){\n        var converter = new showdown.Converter();\n        var html = converter.makeHtml(text);\n        return vm.$sce.trustAsHtml(html);\n    }\n}",
                "css": ".course-bar {\n    background:#25313C;\n}\n\n.course-part {\n    background:#25313C;\n    color:hsla(0,0%,100%,.5);\n    overflow: hidden;\n    \n}\n\n.course-part md-icon {\n    color:hsla(0,0%,100%,.5);\n}\n\n.course-part .md-button {\n    width:100%;\n    margin:0;\n    text-align:left;\n}\n\n.course-part .course-lesson {\n    background: #2E3D49;\n    color:rgba(219,226,232,.5);\n    height:0px;\n    padding-left: 15px;\n}\n\n.course-part.opened .course-lesson {\n    height:auto;\n}\n\n.course-lesson .md-button.selected {\n    color:white;\n    font-weight: bold;\n}\n\n.course-part .course-module .course-lesson{\n    padding-left: 15px;\n}\n\n.lesson-container {\n    height:100%;\n    overflow-y:scroll;\n}\n\n.lesson-container video {\n    width:100% !important;\n    height:initial !important;\n}\n\n.lesson-container img {\n    width:100%;\n    max-width: 960px;\n    margin: 0 auto;\n    display: inherit;\n}\n\n.mejs__container {\n    max-width:960px;\n    max-height:540px;\n    margin:0 auto;\n}",
                "ui": {
                    "position": {
                        "top": 50.00001525878906,
                        "left": 50
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            },
            {
                "name": "entrance",
                "url": "/entrance",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding background-vultr\" layout-align=\"center center\" layout=\"column\" layout-fill style=\"height:100vh\">\n    \n    \n    <h2 style=\"color:white\">\n        The Decentralized Learning Experience\n    </h2>\n    \n    <form ng-submit=\"vm.searchCourse()\" class=\"course-input-container\">\n        <input ng-model=\"vm.courseEndpoint\" class=\"course-input\" placeholder=\"Enter Course Hash\">\n    </form>\n    \n    <div layout=\"row\" style=\"margin-top:15px\">\n        <md-button class=\"md-round md-vultr\" style=\"width:150px\" ng-click=\"vm.searchCourse()\">Enter Course</md-button>\n        <md-button ui-sref=\"app.course\" class=\"md-round md-vultr\" style=\"width:150px\">Get Me Random</md-button>\n    </div>\n    \n    <md-button ui-sref=\"app.course-create-list\" class=\"md-round md-vultr\" style=\"position:absolute;top:20px;right:20px;width:150px\">Make A Course</md-button>\n    \n    <div class=\"copyright\">\n        <p>Copyright Â© 2018 Tony Hu</p>\n    </div>\n    \n</div>",
                "css": ".course-input {\n    padding:0;\n    font-size:12px;\n    border:none;\n    outline:none;\n    width:100%;\n}\n\n.course-input-container {\n    width:400px;\n    background-color: #fff;\n    height: 44px;\n    vertical-align: top;\n    border-radius: 2px;\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.16), 0 0 0 1px rgba(0,0,0,0.08);\n    transition: box-shadow 200ms cubic-bezier(0.4, 0.0, 0.2, 1);\n    padding:10px;\n}\n\n.copyright {\n    padding:15px 0;\n    position:absolute;\n    bottom:0;\n    left:0;\n    width:100%;\n}\n\n.copyright {\n    margin:0;font-size:12px;color:rgba(196, 227, 255, 0.8);text-align:center\n}",
                "ui": {
                    "position": {
                        "top": 50,
                        "left": 160
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                },
                "alias": "Entrance",
                "controller": "function($http,$mdDialog,$state){\n    var vm = this;\n    \n    \n    vm.searchCourse = searchCourse;\n    \n    \n    \n    function searchCourse(){\n        $http.get(vm.courseEndpoint+\"/course.json\").then(function(response){\n            \n            if (response.data){\n                $state.go(\"app.course\",{\n                    hash:vm.courseEndpoint\n                })\n            }\n            \n            \n        }).catch(function(err){\n            \n            console.log(err);\n            \n            $mdDialog.show(\n              $mdDialog.alert()\n                .clickOutsideToClose(true)\n                .title('Course Get Error')\n                .textContent('The Endpoint You Provide Is Not Accessible')\n                .ariaLabel('Alert Dialog')\n                .ok('Try Another')\n            );\n        })\n        \n        \n        \n    }\n}",
                "resolve": "{\n    \n}"
            },
            {
                "name": "course-edit",
                "url": "/course-edit/:id",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding background-vultr\" layout-fill style=\"padding-top:60px;padding-left:100px;\">\n    \n    \n    <div md-whiteframe=\"6\" class=\"course-toolbar\" layout=\"row\" layout-align=\"center center\">\n        \n        <span ui-sref=\"app.course-create-list\">Back To Course Edit List</span>\n        <span flex></span>\n        <span style=\"margin-right:10px\">Current Editing </span>\n        <span> <b>{{vm.selectedCourse.name}}</b></span>\n        <!--<md-select style=\"margin:0 10px;width:250px\" ng-model=\"vm.selectedCourse\" ng-change=\"vm.courseChange()\">-->\n        <!--  <md-option ng-repeat=\"course in vm.courses\" ng-value=\"course\">{{course.name}}</md-option>-->\n        <!--</md-select>-->\n        <span flex></span>\n        <!--<md-button class=\"md-raised md-primary\"><md-icon>add</md-icon>Add New</md-button>-->\n        \n        <md-button class=\"md-raised md-primary\" ng-click=\"vm.preview()\">Preview</md-button>\n        \n        <md-button class=\"md-raised md-primary\" ng-click=\"vm.save()\"><md-icon>save</md-icon>Save</md-button>\n    </div>\n    \n    \n    <div class=\"course-sidebar\" layout=\"column\">\n        <div ng-class=\"{'selected':nav.state==vm.state}\" ng-click=\"vm.goto(nav.state)\" ng-repeat=\"nav in vm.navs\" class=\"course-nav\" layout=\"column\" layout-align=\"center center\">\n            <md-icon>{{nav.icon}}</md-icon>\n            <span>{{nav.name}}</span>\n        </div>\n        \n        \n    </div>\n    \n    <div ui-view=\"edit\" style=\"min-height:100%\">\n        \n    </div>\n    \n    \n</div>",
                "css": ".course-toolbar {\n    position:absolute;\n    top:0;\n    left:0;\n    width:100%;\n    height:60px;\n    background:white;\n    padding:0 30px;\n}\n\n.course-sidebar {\n    position:absolute;\n    top:60px;\n    left:0;\n    height: calc(100vh - 60px);\n    width:100px;\n    background:rgb(90,90,90);\n    \n    padding:30px 0;\n}\n\n.course-nav {\n    padding:20px 0;\n    cursor: pointer;\n}\n\n.course-sidebar .course-nav md-icon {\n    color:white;\n}\n\n.course-sidebar .course-nav {\n    color:white;\n}\n\n.course-sidebar .course-nav.selected {\n    background:white;\n}\n\n.course-sidebar .course-nav.selected md-icon {\n    color:rgb(90,90,90);\n}\n\n.course-sidebar .course-nav.selected {\n    color:rgb(90,90,90);\n}\n",
                "alias": "Course Edit",
                "controller": "function($state,$stateParams,$window,$scope,$interval,$mdToast){\n    var vm = this;\n    \n    vm.state = $state.current.name;\n    \n    \n    if ($stateParams.id){\n        $window.selectedCourse = $window.courses[$stateParams.id];\n    }\n    else {\n        $window.selectedCourse = $window.courses[0];\n    }\n    \n    vm.selectedCourse = $window.selectedCourse\n    \n    \n    vm.navs = [\n        {\n            state:\"app.course-edit.detail\",\n            icon:\"details\",\n            name:\"Info\"\n        },\n        {\n            state:\"app.course-edit.course\",\n            icon:\"book\",\n            name:\"Course\"\n        },\n        {\n            state:\"app.course-edit.export\",\n            icon:\"import_export\",\n            name:\"Export\"\n        },\n        {\n            state:\"app.course-edit.publish\",\n            icon:\"cloud\",\n            name:\"Publish\"\n        }\n    ]\n    \n    vm.goto = function(state){\n        vm.state = state;\n        $state.go(state);\n    }\n    \n    vm.preview = function(){\n        vm.previewWindow = window.open(\"https://thebuilder.hk/board/web/?project_id=1TzGkkrJqV#!/app/course?index=\"+$stateParams.id)\n    }\n    \n    // vm.courseChange = function(){\n    //     console.log($window.selectedCourse);\n    //     console.log(vm.selectedCourse)\n    //     $state.go(\"app.course-edit.course\",{id:vm.courses.indexOf(vm.selectedCourse)})\n    // }\n    \n    vm.save = function(){\n        $window.localStorage.courses = JSON.stringify($window.courses);\n        $mdToast.show(\n          $mdToast.simple()\n            .textContent('Course Saved')\n            .position(\"bottom right\")\n            .hideDelay(2000)\n        );\n        if (vm.previewWindow){\n            vm.previewWindow.location.reload();\n        }\n    }\n    \n    \n    vm.saveInterval = $interval(function(){\n        $window.localStorage.courses = JSON.stringify($window.courses);\n        $mdToast.show(\n          $mdToast.simple()\n            .textContent('Course Auto-Saved')\n            .position(\"bottom right\")\n            .hideDelay(2000)\n        );\n    },20000)\n    \n    $scope.$on(\"$destroy\",function(){\n        $interval.cancel(vm.saveInterval)\n    })\n}",
                "ui": {
                    "position": {
                        "top": 171.94140625,
                        "left": 51.94140625
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            },
            {
                "name": "course-edit.export",
                "url": "/export",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding\">\n    <div class=\"center-box\">\n        <!--<md-card class=\"md-padding\">-->\n        <!--    <h3>-->\n        <!--        Export To PDF-->\n        <!--    </h3>-->\n        <!--</md-card>-->\n        \n        <md-card class=\"md-padding\">\n            <h3>\n                Export To LSON\n            </h3>\n            <p>LSON are special format file that can be only parsed in Learner Publisher Board.</p>\n            <div layout=\"row\" layout-align=\"center center\">\n                \n                <md-button ng-click=\"vm.exportLSON()\" class=\"md-accent md-raised\">Export Now</md-button>\n            </div>\n        </md-card>\n    </div>\n</div>",
                "css": "",
                "view": "edit@app.course-edit",
                "alias": "Export",
                "controller": "function($window){\n    var vm = this;\n    \n    vm.selectedCourse = $window.selectedCourse\n    \n    vm.exportLSON = function(){\n        window.exportCourseLSON(vm.selectedCourse,vm.selectedCourse.name)\n    }\n}",
                "ui": {
                    "position": {
                        "top": 170,
                        "left": 430
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            },
            {
                "name": "course-edit.publish",
                "url": "/publish",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding\">\n    <div class=\"center-box\">\n        <md-card class=\"md-padding\">\n            <h3>\n                Publish Status\n            </h3>\n            \n            <p ng-if=\"!vm.course.published\">This course has never been published</p>\n            \n            <div layout=\"row\" layout-align=\"center center\">\n                <md-button ng-click=\"vm.publish()\" class=\"md-accent md-raised\">Make A Release</md-button>\n            </div>\n            \n        </md-card>\n        \n        <md-card class=\"md-padding\">\n            <h3>\n                Version History\n            </h3>\n            \n            \n            <div layout=\"row\" ng-repeat=\"version in vm.course.versions track by $index\">\n                <span ui-sref=\"app.course({hash:version.hash})\"><b>{{version.hash}}</b></span>\n                <span flex></span>\n                <span>{{version.createdAt | date:\"short\"}}</span>\n            </div>\n            \n            <p ng-if=\"!vm.course.versions || vm.course.versions.length==0;\" style=\"text-align:center;padding:30px\">There are no published versions</p>\n            \n        </md-card>\n        \n        <md-card class=\"md-padding\" ng-if=\"vm.course.versions && vm.course.versions.length>0\">\n            <h3>\n                Embed Or Share\n            </h3>\n            \n            <p>Embed</p>\n            \n            <code style=\"background:#eaeaea;padding:10px;\">\n                &lt;iframe src=\"https://thebuilder.hk/board/web/?project_id=1TzGkkrJqV#!/app/course?hash={{vm.course.versions[vm.course.versions.length-1].hash}}\"&gt;&lt;/iframe&gt;\n            </code>\n            \n            <p>Share</p>\n            \n            <p style=\"background:#eaeaea;padding:10px;\">{{'https://thebuilder.hk/board/web/?project_id=1TzGkkrJqV#!/app/course?hash='+vm.course.versions[vm.course.versions.length-1].hash}}</p>\n            \n            \n            \n            \n        </md-card>\n    </div>\n    \n</div>",
                "css": "",
                "view": "edit@app.course-edit",
                "controller": "function($window,$timeout){\n    \n    var vm = this;\n    \n    vm.course = $window.selectedCourse\n    \n    vm.publish = function(){\n        ipfs.add(ipfs.Buffer(JSON.stringify(vm.course))).then(function(result){\n        \t\n        \tif (vm.course.versions) {\n                vm.course.versions.push({\n                    createdAt:new Date(),\n                    hash:result[0].hash\n                })\n            }\n            else {\n                \n                vm.course.published = true;\n                \n                vm.course.versions = [{\n                    createdAt:new Date(),\n                    hash:result[0].hash\n                }]\n            }\n            \n            $window.localStorage.courses = JSON.stringify($window.courses);\n        \t$timeout(function(){})\n        })\n        .catch(function(err){\n        \tconsole.log(err)\n        })\n        \n        \n    }\n}",
                "ui": {
                    "position": {
                        "top": 170.984375,
                        "left": 560.984375
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            },
            {
                "name": "course-edit.course",
                "url": "/course",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding\" layout-fill>\n    <div layout=\"row\">\n        <md-card class=\"section-column md-padding\">\n            <div ng-repeat=\"part in vm.course.parts\" layout=\"column\">\n                <div layout=\"row\" layout-align=\"center center\">\n                    <span class=\"badge\">{{$index+1}}</span>\n                    <md-input-container style=\"margin:0\" class=\"no-error md-block md-no-float\" flex>\n                        <input ng-model=\"part.name\">\n                    </md-input-container>\n                    \n                    <md-icon ng-click=\"vm.course.parts.splice($index,1)\">delete</md-icon>\n                    \n                </div>\n                <div style=\"padding-left:20px\">\n                    \n                    <div ng-repeat=\"lesson in part.lessons\" layout=\"column\">\n                        \n                        \n                        <div class=\"lesson-row\" layout=\"row\" layout-align=\"center center\" ng-class=\"{'selected':vm.selectedLessonId==$parent.$index+'.'+$index}\">\n                            <span class=\"badge\">{{$parent.$index+1}}.{{$index+1}}</span>\n                            <span class=\"lesson-title\" style=\"padding-left:10px;cursor:pointer;margin:5px 0;\" flex ng-click=\"vm.selectedLesson = lesson;vm.selectedSection=vm.selectedLesson.sections[0];vm.selectedLessonId=$parent.$index+'.'+$index\">{{lesson.name}}</span>\n                            <!--<md-input-container ng-click=\"vm.selectedLesson = lesson\" style=\"margin:0\" class=\"no-error md-block md-no-float\" flex>-->\n                            <!--    <input ng-model=\"lesson.name\">-->\n                            <!--</md-input-container>-->\n                            <md-icon ng-click=\"part.lessons.splice($index,1)\">delete</md-icon>\n                        </div>\n                        <!--<div style=\"padding-left:30px\">-->\n                            \n                        <!--    <div ng-repeat=\"section in lesson.sections\" layout=\"column\">-->\n                        <!--        <div layout=\"row\" layout-align=\"center center\">-->\n                                    \n                        <!--            <md-input-container style=\"margin:0\" class=\"no-error md-block md-no-float\" flex>-->\n                        <!--                <input ng-model=\"section.name\">-->\n                        <!--            </md-input-container>-->\n                        <!--            <md-icon>delete</md-icon>-->\n                        <!--        </div>-->\n\n                                \n                        <!--    </div>-->\n                            \n                        <!--    <md-button class=\"md-round md-raised md-warn\" ng-click=\"lesson.sections.push({name:'New Section'})\" style=\"width:100%;margin:10px 0\"><md-icon>add</md-icon>Add New Section</md-button>-->\n                        <!--</div>-->\n                        \n                    </div>\n                    \n                    \n                    \n                    <md-button class=\"md-round md-raised md-accent\" ng-click=\"part.lessons.push({name:'New Lesson',sections:[{type:'text'}]})\" style=\"width:100%;margin:10px 0\"><md-icon>add</md-icon>Add New Lesson</md-button>\n                </div>\n                \n            </div>\n            \n            <md-button class=\"md-round md-raised md-primary\" ng-click=\"vm.course.parts.push({name:'New Part',lessons:[{name:'New Lesson',sections:[{type:'text'}]}]})\" style=\"width:100%;margin:10px 0\"><md-icon>add</md-icon>Add New Part</md-button>\n        </md-card>\n        \n        <md-card style=\"width:360px\" ng-show=\"vm.selectedLesson\" layout=\"column\" class=\"md-padding\">\n            \n            <h3>Lesson Detail</h3>\n            <div layout=\"row\" layout-align=\"center center\">\n                <span style=\"margin-right:10px;font-weight:bold\">Lesson Name</span> \n                <md-input-container style=\"margin:0\" class=\"no-error md-block md-no-float\" flex>\n                    <input ng-model=\"vm.selectedLesson.name\">\n                </md-input-container>\n            </div>\n            \n            <h4>Sections</h4>\n            \n            <div ui-sortable ng-model=\"vm.selectedLesson.sections\">\n                <div class=\"course-section\" ng-repeat=\"section in vm.selectedLesson.sections\" layout=\"row\" layout-align=\"center center\" ng-click=\"vm.selectSection(section)\" ng-class=\"{'selected':vm.selectedSection==section}\">\n                    <md-icon ng-if=\"section.type=='video'\">videocam</md-icon>\n                    <span ng-if=\"section.type=='video'\" style=\"margin-left:10px\">Video</span>\n                    \n                    <md-icon ng-if=\"section.type=='text'\">short_text</md-icon>\n                    <span ng-if=\"section.type=='text'\" style=\"margin-left:10px\">Text</span>\n                </div>\n                \n            </div>\n            \n            \n            \n            \n            <div class=\"add-new-zone\" layout=\"row\" layout-align=\"center center\">\n                \n                <span style=\"margin-right:10px\">Add</span>\n                \n                <div class=\"add-new-block\" ng-repeat=\"block in vm.blocks\"  ng-click=\"vm.selectedLesson.sections.push({type:block.type})\">\n                    <div layout=\"column\" layout-align=\"center center\">\n                        <md-icon>{{block.icon}}</md-icon>\n                        <span>{{block.name}}</span>\n                    </div>\n                </div>\n            </div>\n        </md-card>\n        \n        \n        <div flex>\n            <md-card ng-show=\"vm.selectedSection\" class=\"md-padding\">\n                \n                <div ng-if=\"vm.selectedSection.type=='video'\">\n                    <h3>Video Detail</h3>\n                    \n                    <div layout=\"row\">\n                        <span style=\"margin-right:10px\"><b>Video Type</b></span>\n                        <md-radio-group ng-model=\"vm.selectedSection.video_type\" layout=\"row\">\n\n                          <md-radio-button value=\"youtube\" class=\"md-primary\">Youtube</md-radio-button>\n                          <md-radio-button value=\"vimeo\">Vimeo</md-radio-button>\n                          <md-radio-button value=\"url\">MP4 URL</md-radio-button>\n                    \n                        </md-radio-group>\n                    </div>\n                    \n                    <div layout=\"row\" layout-align=\"center center\">\n                        <span style=\"margin-right:10px\"><b>Video URL</b></span>\n                        <md-input-container style=\"margin:0\" class=\"no-error md-block md-no-float\" flex>\n                            <input ng-model=\"vm.selectedSection.video_url\">\n                        </md-input-container>\n                    </div>\n                    \n                </div>\n                \n                <div ng-if=\"vm.selectedSection.type=='text'\">\n                    <h3>Text Detail</h3>\n                    <div style=\"height:400px;width: 100%;margin: 0 auto\" ng-model=\"vm.selectedSection.content\" ui-ace=\"{\n\t\t\t\t\t  useWrapMode : true,\n\t\t\t\t\t  showGutter: true,\n\t\t\t\t\t  theme:'twilight',\n\t\t\t\t\t  mode: 'markdown',\n    \t\t\t\t  require: ['ace/ext/language_tools'],\n    \t\t\t\t  advanced: {\n    \t\t\t\t      enableSnippets: true,\n    \t\t\t\t      enableBasicAutocompletion: true,\n    \t\t\t\t      enableLiveAutocompletion: true\n    \t\t\t\t  }\n\t\t\t\t\t}\">\n\t\t\t\t\t</div>\n                </div>\n            </md-card>\n            \n        </div>\n        \n        \n        \n        \n    </div>\n    \n    \n    \n    \n    \n</div>",
                "css": ".section-column {\n    width:360px;\n    /*height:100%;*/\n    overflow-y: scroll;\n}\n\n.badge {\n    font-size:12px;\n    padding:5px 15px;\n    border-radius:5px;\n    background:#3498db;\n    color:white;\n}\n\n.part-container .md-primary {\n    display: none;\n}\n\n.part-container:hover .md-primary {\n    display: block;\n}\n\n.lesson-row.selected .lesson-title {\n    color:#3498db;\n}\n\n.add-new-zone {\n    margin-top: 10px;\n    text-align:center;\n}\n\n.add-new-block {\n    width:60px;\n    margin:0 5px;\n    border:1px solid black;\n    border-radius:100px;\n    padding:10px;\n}\n\n.add-new-block md-icon {\n    \n}\n\n.add-new-block span {\n    font-size:12px;\n    \n}\n\n.course-section {\n    background:#eaeaea;\n    margin: 5px 0;\n    padding:5px;\n    cursor: pointer;\n}\n\n.course-section.selected {\n    background:#3498db;\n    color:white;\n}\n\n.course-section md-icon {\n    margin:0;\n}\n\n.course-section.selected md-icon {\n    color:white;\n}",
                "view": "edit@app.course-edit",
                "controller": "function($window){\n    var vm = this;\n    \n    \n    \n    vm.course = $window.selectedCourse;\n    \n    \n    \n    vm.blocks = [\n        {\n            icon:\"short_text\",\n            name:\"Text\",\n            type:\"text\"\n        },\n        {\n            icon:\"videocam\",\n            name:\"Video\",\n            type:\"video\"\n        }\n    ]\n    if (vm.course.parts){\n        vm.selectedLesson = vm.course.parts[0].lessons[0];\n        vm.selectedSection = vm.selectedLesson.sections[0];\n        vm.selectedLessonId = \"0.0\"\n    }\n    else {\n        vm.course.parts = []\n    }\n    \n    \n    vm.selectSection = function(section){\n        vm.selectedSection = section\n    }\n}",
                "ui": {
                    "position": {
                        "top": 170,
                        "left": 170
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                },
                "alias": "Course Edit Struct"
            },
            {
                "name": "course-edit.detail",
                "url": "/detail",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding\">\n    <div class=\"center-box\">\n        <md-card class=\"md-padding\">\n            <h3>\n                Course Information\n            </h3>\n            \n            <md-input-container class=\"md-block\" flex-gt-xs>\n                <label>Course Name</label>\n                <input ng-model=\"vm.course.name\">\n            </md-input-container>\n          \n            <md-input-container class=\"md-block\">\n                <label>Course Introduction</label>\n                <textarea ng-model=\"vm.course.introduction\" md-maxlength=\"150\" rows=\"5\" md-select-on-focus></textarea>\n            </md-input-container>\n            \n            \n        </md-card>\n        \n        \n        <md-card class=\"md-padding\">\n            <h3>\n                Paid Course Functions (Beta)\n            </h3>\n            \n            <md-input-container class=\"md-block\">\n                <label>Your WAVES Wallet Address</label>\n                <input md-maxlength=\"30\" md-no-asterisk name=\"description\" ng-model=\"vm.course.payment.info\">\n\n            </md-input-container>\n            \n            <div layout=\"row\">\n                \n                <md-input-container flex class=\"md-block\">\n                    <label>Course Price</label>\n                    <input type=\"number\" step=\"any\" name=\"rate\" ng-model=\"vm.course.payment.price\" min=\"1\"\n                           max=\"1000\" />\n                </md-input-container>\n                \n                <md-input-container flex>\n                  <label>Payment Type</label>\n                  <md-select name=\"type\" ng-model=\"vm.course.payment.type\">\n                    <md-option value=\"one\">One-Time</md-option>\n                    <md-option value=\"sub\">Subscription</md-option>\n                  </md-select>\n                </md-input-container>\n            </div>\n        </md-card>\n    </div>\n</div>",
                "css": "",
                "alias": "Course Edit Detail",
                "view": "edit@app.course-edit",
                "controller": "function($window){\n    var vm = this;\n    \n    vm.course = $window.selectedCourse\n    \n    if (!vm.course){\n        \n    }\n    \n    if (!vm.course.payment){\n        vm.course.payment = {\n            type:\"one\"\n        }\n    }\n}",
                "ui": {
                    "position": {
                        "top": 170,
                        "left": 300
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            },
            {
                "name": "course-create-list",
                "url": "/course-create-list",
                "contrller": "function(){}",
                "template": "<div class=\"md-padding background-vultr\" layout-fill  layout=\"row\" layout-align=\"center center\">\n    \n    \n    <div layout=\"column\" layout-align=\"center center\">\n        <h3 style=\"color:white\">Select A Course To Edit</h3>\n        \n        <div ui-sref=\"app.course-edit.detail({id:$index})\" md-whiteframe=\"{{height}}\" ng-init=\"height=6\" ng-mouseenter=\"height = 12\" ng-mouseleave=\"height = 6\" class=\"course-item\" ng-repeat=\"course in vm.courses\">\n            {{course.name}}\n        </div>\n        \n        <div layout=\"row\" style=\"width:350px\">\n            \n            <div ngf-select=\"vm.import($file)\" style=\"text-align:center;\" class=\"course-button\" md-whiteframe=\"6\">\n                Import\n            </div>\n            <span flex></span>\n            <div ng-click=\"vm.newCourse()\" style=\"text-align:center;\" class=\"course-button\" md-whiteframe=\"6\">\n                New\n            </div>\n        \n        </div>\n        \n        <p style=\"color:white\">* All courses are loaded from you browser's local storage</p>\n    </div>\n    \n    \n</div>",
                "css": ".course-item {\n    background:transparent;\n    color:white;\n    width:350px;\n    padding:15px;\n    margin:10px 0;\n}\n\n.course-button {\n    background:transparent;\n    color:white;\n    padding:15px;\n    margin:10px 0;\n    width:170px;\n}\n\n\n.course-item md-icon,.course-button md-icon{\n    color:white;\n}",
                "alias": "Create List",
                "ui": {
                    "position": {
                        "top": 50.984375,
                        "left": 300.984375
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                },
                "controller": "function($window,$state){\n    var vm = this;\n    \n    vm.courses = $window.courses;\n    \n    \n    vm.import = function(file){\n        console.log(file);\n        var reader = new FileReader();\n        reader.readAsText(file, 'UTF-8');\n        reader.onload = function(evt) {\n            \n            var course = JSON.parse(decodeURIComponent(atob(evt.target.result)))\n            console.log(course)\n            \n        }\n    }\n    \n    vm.newCourse = function(){\n        vm.courses.push({name:\"New Course\"});\n        var index = vm.courses.length-1;\n        $state.go(\"app.course-edit.detail\",{id:index})\n    }\n}"
            },
            {
                "name": "course-udemy",
                "url": "/new-state",
                "contrller": "function(){}",
                "template": "<div class=\"md-vultr\" layout=\"row\" style=\"height:100vh\">\n    <div layout=\"column\" style=\"height:100%\" class=\"course-bar\">\n        <div class=\"course-part\" ng-repeat=\"part in vm.course.parts\" ng-class=\"{'opened':vm.openTab==$index}\">\n            \n            <md-button ng-click=\"vm.openTab=$index\" layout=\"row\" layout-align=\"center center\">\n                <span>{{part.title}}</span>\n                <span flex></span>\n                <md-icon ng-if=\"vm.openTab!=$index\">keyboard_arrow_down</md-icon>\n                <md-icon ng-if=\"vm.openTab==$index\">keyboard_arrow_up</md-icon>\n                </md-button>\n            <div class=\"course-module\" ng-repeat=\"module in part.modules\">\n                <!--<md-button>{{$index+1}}.{{module.title}}</md-button>-->\n                <div style=\"padding:5px 0\">{{$index+1}}.{{module.title}}</div>\n                <div class=\"course-lesson\" ng-repeat=\"lesson in module.lessons\">\n                    <md-button ng-class=\"{'selected':vm.currentCourseId==lesson.id}\" ng-click=\"vm.selectCourse(lesson.id,part)\">{{$parent.$parent.$index+1}}.{{$index+1}}.{{lesson.title}}</md-button>\n                </div>\n            </div>\n        </div>\n        \n    </div>\n    <div class=\"md-padding lesson-container\" flex>\n        <div ng-repeat=\"concept in vm.lesson.concepts\">\n            <h3>{{concept.title}}</h3>\n            <div ng-repeat=\"atom in concept.atoms\">\n                <div style=\"margin:20px 0\" ng-if=\"atom.semantic_type=='VideoAtom'\">\n                    <video width=\"100%\" vjs controls ng-src=\"{{'https://s3.cn-north-1.amazonaws.com.cn/u-vid-hd/'+atom.video.china_cdn_id}}\"></video>\n                    \n                    <!--<video class=\"video-js\" vjs controls >-->\n                        \n                    <!--    <source ng-src=\"{{'https://s3.cn-north-1.amazonaws.com.cn/u-vid-hd/'+atom.video.china_cdn_id}}\" type='video/mp4'>-->\n                        \n                    <!--</video>-->\n                </div>\n                \n                <div ng-if=\"atom.semantic_type=='ImageAtom'\">\n                    <img ng-src=\"{{atom.non_google_url}}\">\n                    \n                </div>\n                \n                <div ng-if=\"atom.semantic_type=='TextAtom'\" ng-bind-html=\"vm.getHtml(atom.text)\">\n                    \n                </div>\n                \n                <div ng-if=\"atom.semantic_type=='TaskListAtom'\">\n                    <h3>ä»»å¡ï¼{{atom.description}}</h3>\n                    <ul>\n                        <li ng-repeat=\"task in atom.tasks\">\n                            {{task}}\n                        </li>\n                    </ul>\n                    \n                </div>\n            </div>\n        </div>\n        <!--<div ng-bind-html=\"vm.$sce.trustAsHtml(vm.courseHTML)\">-->\n            \n        <!--</div>-->\n    </div>\n</div>",
                "css": ".course-bar {\n    background:#25313C;\n}\n\n.course-part {\n    background:#25313C;\n    color:hsla(0,0%,100%,.5);\n    overflow: hidden;\n    \n}\n\n.course-part md-icon {\n    color:hsla(0,0%,100%,.5);\n}\n\n.course-part .md-button {\n    width:100%;\n    margin:0;\n    text-align:left;\n}\n\n.course-part .course-module {\n    background: #2E3D49;\n    color:rgba(219,226,232,.5);\n    height:0px;\n    padding-left: 15px;\n}\n\n.course-part.opened .course-module {\n    height:auto;\n}\n\n.course-lesson .md-button.selected {\n    color:white;\n    font-weight: bold;\n}\n\n.course-part .course-module .course-lesson{\n    padding-left: 15px;\n}\n\n.lesson-container {\n    height:100%;\n    overflow-y:scroll;\n}\n\n.lesson-container video,.lesson-container img {\n    width:100%;\n}",
                "controller": "function($stateParams,$http,$sce){\n    var vm = this;\n    var base = $stateParams.base;\n    \n    vm.openTab = 0;\n    vm.$sce = $sce;\n    \n    vm.selectCourse = selectCourse;\n    vm.getHtml = getHtml;\n    \n    init();\n    \n    function init(){\n        \n        \n        \n        if (base){\n            $http.get(base+\"/course.json\").then(function(response){\n                vm.course = response.data.data.nanodegree;\n                \n                var currentId = window.localStorage['currentCourseId'] || vm.course.parts[0].modules[0].lessons[0].id;\n                \n                vm.openTab = window.localStorage['currentTab'] || 0;\n                vm.selectCourse(currentId)\n                \n            })\n        }\n        \n        \n    }\n    \n    function selectCourse(id,part){\n        \n        \n        if (vm.currentCourseId == id){\n            return;\n        }\n        \n        vm.currentCourseId = id;\n        \n        window.localStorage['currentCourseId'] = id;\n        \n        if (part){\n            window.localStorage['currentTab'] = vm.course.parts.indexOf(part);\n        }\n        \n        \n        $http.get(base+\"/lesson/\"+id+\".json\").then(function(response){\n            // var converter = new showdown.Converter();\n            // var text      = '# hello, markdown!';\n            // vm.lesson = converter.makeHtml(response.data.data.lesson);\n            \n            vm.lesson = response.data.data.lesson;\n        })\n        \n        \n        \n    }\n    \n    function getHtml(text){\n        var converter = new showdown.Converter();\n        var html = converter.makeHtml(text);\n        return vm.$sce.trustAsHtml(html);\n    }\n}",
                "ui": {
                    "position": {
                        "top": 290,
                        "left": 50
                    },
                    "size": {
                        "width": 100,
                        "height": 100
                    }
                }
            }
        ],
        "defaultState": "app.entrance",
        "appBase": {
            "css": "body {\n    margin:0;\n}\n\nmd-input-container.no-error .md-errors-spacer{\n    display:none;\n}\n\n.background-vultr {\n    background: linear-gradient(45deg, #0B4182 1%, #1e88e5 64%, #40BAF5 97%);\n}\n\n.md-round {\n    border-radius:20px;\n    padding-left: 20px;\n    padding-right:20px;\n    text-transform: none;\n}\n\n.md-button.md-vultr {\n    text-transform: none;\n    border-radius:20px;\n    padding-left: 20px;\n    padding-right:20px;\n    border:1px solid white;\n    background:transparent;\n    color:white;\n}\n\n.vultr-card {\n    background:transparent;\n    color:white;\n}\n\n.vultr-badge {\n    border-radius:20px;\n    padding:5px 20px;\n}\n\n.center-box {\n    margin:0 auto;\n    width:100%;\n    max-width:700px;\n}",
            "template": "<div style=\"height: 100%;\" ui-view='app'>\n    \n</div>\n\n<a id=\"downloadAnchorElem\" style=\"display:none\"></a>",
            "controller": "function($window){\n    \n    \n    window.ipfs = window.IpfsApi('localhost', '5001')\n    \n    if ($window.localStorage.courses){\n        $window.courses = JSON.parse($window.localStorage.courses);\n    }\n    else {\n        $window.courses = [\n            {\n                name:\"How To Solo A Hackathon\",\n                parts:[\n                    {\n                        name:\"Understand Solo is a fact\",\n                        lessons:[\n                            {\n                                name:\"Get relive\",\n                                sections:[{\n                                    type:\"text\"\n                                }]\n                            }\n                        ]  \n                    }\n                ]\n            },\n            {\n                name:\"Food Waste\"\n            }\n        ];\n    }\n    \n    \n}"
        },
        "customScript": "angular.module('tia').directive(\"vjs\",function($timeout){\n    return {\n        link:function(scope,element,attrs){\n            // videojs(element[0])\n            \n            $timeout(function(){\n                var video = new MediaElementPlayer(element[0],{\n                    pluginPath:'https://cdn.bootcss.com/mediaelement/4.2.9/',\n                    shimScriptAccess: 'always',\n                    stretching: 'responsive',\n                    success: function(mediaElement, originalNode) {\n            \t\t\t// do things\n            \n            \t\t}\n                })\n            })\n            \n            \n        }\n    }\n})\n\n\nwindow.exportCourseLSON = function(json,name){\n    var dataStr = \"data:text/json;charset=utf-8,\" + btoa(encodeURIComponent(JSON.stringify(json)));\n    var dlAnchorElem = document.getElementById('downloadAnchorElem');\n    dlAnchorElem.setAttribute(\"href\",     dataStr     );\n    dlAnchorElem.setAttribute(\"download\", name+\".lson\");\n    dlAnchorElem.click();\n}\n\n// busy turn noodle second feature leader profit mango hazard submit trim labor peasant duty celery \n// Wave Passphrase"
    },
    "libs": {
        "js": [
            "https://cdn.bootcss.com/showdown/1.8.6/showdown.min.js",
            "https://cdn.bootcss.com/mediaelement/4.2.9/mediaelement-and-player.min.js",
            "https://unpkg.com/ipfs-api/dist/index.min.js",
            "https://cdn.bootcss.com/angular-ui-sortable/0.19.0/sortable.min.js",
            "https://cdn.bootcss.com/ace/1.3.3/ace.js",
            "https://buildmind.b0.upaiyun.com/fra/ui-ace.min.js",
            "https://cdn.bootcss.com/danialfarid-angular-file-upload/12.2.13/ng-file-upload-all.min.js"
        ],
        "css": [
            "https://cdn.bootcss.com/mediaelement/4.2.9/mediaelementplayer.min.css",
            "https://cdn.bootcss.com/material-design-icons/3.0.1/iconfont/material-icons.min.css",
            "https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.min.css"
        ]
    },
    "name": "The Learner",
    "platform": "web",
    "createdAt": "2018-06-07T15:08:05.461Z",
    "updatedAt": "2018-07-08T03:38:35.688Z",
    "objectId": "1TzGkkrJqV"
}